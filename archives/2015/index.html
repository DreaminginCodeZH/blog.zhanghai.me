<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>存档：2015 | 梦断代码</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description">
<meta property="og:type" content="article">
<meta property="og:title" content="梦断代码">
<meta property="og:url" content="http://blog.zhanghai.me/archives/2015/">
<meta property="og:site_name" content="梦断代码">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="梦断代码">
<meta name="twitter:description">

  
    <link rel="alternative" href="/atom.xml" title="梦断代码" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>

<body>
  <div id="container">
    <div class="mobile-nav-panel">
  <i class="icon-reorder icon-large"></i>
</div>
<header id="header">
  <h1 class="blog-title">
    <a href="/">梦断代码</a>
  </h1>
  <nav class="nav">
    <ul>
      <li><a href="/">主页</a></li><li><a href="/archives">存档</a></li>
      <li><a id="nav-search-btn" class="nav-icon" title="搜索"></a></li>
      <li><a href="/atom.xml" id="nav-rss-link" class="nav-icon" title="RSS 订阅"></a></li>
    </ul>
  </nav>
  <div id="search-form-wrap">
    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="搜索"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://blog.zhanghai.me"></form>
  </div>
</header>

    <div id="main">
      
  
    <article id="post-c-exam-notes" class="post">
  <header class="entry-meta-header">
    <span class="meta-elements date">
      <a href="/c-exam-notes/" class="article-date">
  <time datetime="2015-02-15T10:38:12.000Z" itemprop="datePublished">2月 15 2015</time>
</a>

    </span>
    <span class="meta-elements author">张海</span>
    <div class="commentscount">
      
        <a href="http://blog.zhanghai.me/c-exam-notes/#disqus_thread" class="article-comment-link">评论</a>
      
    </div>
  </header>
  

  <header class="entry-header">
    
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/c-exam-notes/">C 语言应试笔记</a>
    </h1>
  


  </header>
  <div class="entry-content">
    
      <h2 id="前言">前言</h2>
<p>这是我在大一时 C 语言课程考试前总结的坑们，每次相关考试前都会复习一次。如果你发现可以补充的地方，欢迎评论。</p>
<h2 id="正文">正文</h2>
<p><code>if</code> 语句没有花括号时只包含之后一行，如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (condition)</div><div class="line">    optionally_executed();</div><div class="line">    always_executed();</div></pre></td></tr></table></figure>

<p><code>if else</code>语句在没有花括号时，<code>else</code>总是匹配最近的<code>if</code>（Dangling Else），如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (a)</div><div class="line">    <span class="keyword">if</span> (b) do_b();</div><div class="line"><span class="keyword">else</span> do_c();</div></pre></td></tr></table></figure>

<p>实际上是：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (a) {</div><div class="line">    <span class="keyword">if</span> (b) {</div><div class="line">        do_b();</div><div class="line">    } <span class="keyword">else</span> {</div><div class="line">        do_c();</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p><code>switch</code>语句在缺少<code>break</code>时将 Fall through。</p>
<p>求值逻辑表达式时<code>真</code>为<code>1</code>，<code>假</code>为<code>0</code>。 判断逻辑表达式时，<code>非0</code>为<code>真</code>，<code>0</code>为<code>假</code>。</p>
<p><code>*p++</code>等价于<code>*(p++)</code>，因后自增<code>++</code>优先级高于解引用<code>*</code>。</p>
<p>注意整型除法结果被截断， <code>int n = 2; 1 / n == 0</code>。</p>
<p>注意本地变量需要初始化。</p>
<p>注意变量作用域屏蔽，如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> b;</div><div class="line"><span class="keyword">void</span> f() { <span class="keyword">int</span> a = <span class="number">0</span>, b = <span class="number">1</span>; }</div></pre></td></tr></table></figure>

<p>注意<code>int</code>溢出，若易发生溢出（如阶乘操作）应使用<code>long</code>或<code>double</code>代替。</p>
<p>负数的位移操作中符号位也参与位移；左操作数为负数的右移<code>&gt;&gt;</code>结果由实现定义，Turbo C为补1。</p>
<p><code>a/b</code>与<code>a%b</code>结果在<code>a</code>与<code>b</code>中有一个为负数时由实现定义，但保证<code>a / b * b + a % b</code>结果为<code>a</code>。</p>
<p>过滤回车结束的输入字符串：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">i = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span> ((ch = getchar()) != <span class="string">'\n'</span>) {</div><div class="line">    <span class="keyword">if</span> (ch ... ) {</div><div class="line">        <span class="keyword">continue</span>;</div><div class="line">    }</div><div class="line">    str[i++] = ch;</div><div class="line">}</div><div class="line">str[i] = <span class="string">'\0'</span>;</div></pre></td></tr></table></figure>

<p>C语言二维数组存储采用Row-major方式，即在内存中存储为row1, row2, row3…，初始化时必须给出列数以确定行中元素个数，静态变量中未初始化元素自动为0，使用时可以将列数溢出到下一行，即偏移值计算为row_count * row + column。</p>
<p>注意分号：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (...);</div><div class="line">            do_something();</div></pre></td></tr></table></figure>

<p><code>do_something</code>只执行一次。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="number">0</span>);</div><div class="line">    do_something();</div></pre></td></tr></table></figure>

<p><code>do_something</code>一定会被执行。</p>
<p><code>sizeof()</code>表达式的值在编译时确定。编译器不计算其中表达式的值，仅将其替换为对应类型。<code>sizeof</code>应用于数组时结果为 数组元素个数 * 元素大小，应用于指针时为指针变量长度（在32位机器上地址长度为32，故值为8；64位机器上为16）。</p>
<p>无论<code>x</code>是数组还是指针，在定义上编译器认为<code>x[3]</code>与<code>*(x+3)</code>是等价的。但根据x的类型是数组还是指针, 编译器将为<code>x+3</code>或<code>sizeof(x)</code>生成不同的代码。</p>
<p>类似<code>char []</code>类型的数组名被视为指向<code>char</code>的指针，<code>char[][]</code>也被视为指向<code>char[]</code>的指针。</p>
<p>注意<code>&amp;&amp;</code>或<code>||</code>具有<code>短路求值</code>特性，不会执行无必要求值的表达式。</p>
<p>注意含中文字符的文件应保存为<code>GB*</code>编码，例如<code>GB18030</code>。</p>
<p><code>strcpy(dst, src)</code>中目标在前，源在后。</p>
<p>注意<code>int a, b, c</code>，<code>c = 2a + b</code>非法（需要<code>*</code>）。</p>
<p>注意<code>x&lt;=y&lt;=z</code>意为<code>(x&lt;=y)&lt;=z</code>，意义非预期但合法。</p>
<p><code>scanf</code>遇到空白字符截止，为输入一行可使用<code>scanf(&quot;[^\n]&quot;,str)</code>或<code>gets()</code>。</p>
<p>注意：<code>scanf(&quot;%s&quot;, s)</code>输入<code>&quot;How are you?&quot;</code>遇到空格截断，只得到<code>How</code>。</p>
<p><code>strcpy(char *dst, char *src) { while(*dst++ = *src++); };</code>中<code>++</code>优先级高于<code>*</code></p>
<p><code>[]</code>、<code>()</code>优先级高于<code>*</code>，故<code>int *array[1]</code>等价于<code>(int *)array[1]</code>，为int指针的数组；<code>int (*p)[1]</code>为指向<code>int</code>数组的指针。</p>
<p>解读方法：以<code>int **a[1][2]</code>为例。从a出发，优先向右解读。（<a href="http://unixwiz.net/techtips/reading-cdecl.html" target="_blank" rel="external">来源</a>）</p>
<ol>
<li><code>a</code> is … <code>int</code></li>
<li><code>a</code> is <code>array</code> of 1 … <code>int</code></li>
<li><code>a</code> is <code>array</code> of 1 <code>array</code> of 2 … <code>int</code></li>
<li><code>a</code> is <code>array</code> of 1 <code>array</code> of 2 <code>pointer</code>s to … <code>int</code></li>
<li><code>a</code> is <code>array</code> of 1 <code>array</code> of 2 <code>pointer</code>s to <code>poiner</code> to <code>int</code></li>
</ol>
<p>优先级：<em>后置自增/自减</em>、函数调用、数组元素、结构成员 &gt; 前置自增/自减、正负、类型装换、<em>解引用</em>、取地址、数据类型大小、内存操作、（逻辑、位）非 &gt; 结构成员解引用 &gt; 乘除、取余 &gt; 加减 &gt; <em>位移</em> &gt; 比较 &gt; 等价 &gt; （逻辑、位）与、或、异或 &gt; 三元条件、（复合）赋值。</p>
<p>字符串字面值与字符常量中转义序列<code>\ddd</code>可以为1、2、3位8进制数（0~7），上限为377；<code>\xhh</code>可以为1、2位十六进制数（0~F）。</p>
<p>转义序列列表：</p>
<table>
<thead>
<tr>
<th>转移序列</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\a</code></td>
<td><code>BEL</code></td>
</tr>
<tr>
<td><code>\b</code></td>
<td><code>BS</code></td>
</tr>
<tr>
<td><code>\f</code></td>
<td><code>FF</code></td>
</tr>
<tr>
<td><code>\n</code></td>
<td><code>LF</code></td>
</tr>
<tr>
<td><code>\r</code></td>
<td><code>CR</code></td>
</tr>
<tr>
<td><code>\t</code></td>
<td><code>HT</code></td>
</tr>
<tr>
<td><code>\v</code></td>
<td><code>VT</code></td>
</tr>
<tr>
<td><code>\\</code></td>
<td><code>\</code></td>
</tr>
<tr>
<td> <code>\&#39;</code></td>
<td><code>&#39;</code></td>
</tr>
<tr>
<td><code>\&quot;</code></td>
<td><code>&quot;</code></td>
</tr>
<tr>
<td><code>\0</code></td>
<td><code>NULL</code></td>
</tr>
<tr>
<td><code>\ddd</code></td>
<td>八进制</td>
</tr>
<tr>
<td><code>\xhh</code></td>
<td>十六进制</td>
</tr>
</tbody>
</table>
<p>0~255的数字也可以作为有效的字符取值。</p>
<p><code>int i = -1; printf(&quot;%d&quot;, (unsigned int)i);</code>打印出<code>-1</code>，因为<code>%d</code>为有符号整型。</p>
<p>使用草稿纸记录变量取值以计算程序输出，或对某些类型可理解程序意图猜测程序输出，或两者结合。</p>
<p><code>10^-6</code>表示为<code>1e-6</code>。</p>
<p>通过<code>memset(array,0,sizeof(array))</code>可以实现数组重初始化。（需要<code>string.h</code>）</p>
<p>宏<code>#</code>代表将此后的文本变为字符串；<code>##</code>代表连接文本；含有<code>#</code>与<code>##</code>的宏不进行参数展开，可利用包装宏展开。（<a href="http://learn.akae.cn/media/ch21s02.html" target="_blank" rel="external">参考</a>）</p>
<p>宏函数定义：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">define</span> func_name(var) \</span></div><div class="line"><span class="keyword">do</span> { \</div><div class="line">    do_something(); \</div><div class="line">} <span class="keyword">while</span> (<span class="number">0</span>)</div></pre></td></tr></table></figure>

<p>调用与函数调用一致：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">func_name(var);</div></pre></td></tr></table></figure>

<p><code>scanf</code>中<code>f</code>为<code>float</code>，<code>lf</code>为<code>double</code>；<code>printf</code>中<code>f</code>为<code>double</code>；<code>lf</code>未定义。</p>
<p><code>,</code>逗号表达式对左侧表达式求值并丢弃返回值，之后对右侧表达式求值并返回其返回值。</p>
<p><code>#define SWAP(a,b) (a)^=(b)^=(a)^=(b)</code>可实现无临时变量的交换。</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>ASCII</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>48</td>
</tr>
<tr>
<td>A</td>
<td>65</td>
</tr>
<tr>
<td>a</td>
<td>97</td>
</tr>
</tbody>
</table>
<p>变量命名法则：<code>[A-Za-z_][A-Za-z0-9_]*</code>，且不含关键字。</p>
<p><code>auto</code>，<code>register</code>，<code>volatile</code>均为C关键字。</p>
<p><code>007</code>为八进制数字，注意范围为<em>0-7</em>，<code>0x0F</code>为十六进制数字。</p>
<p><code>strcat</code>实现：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> <span class="built_in">strcat</span>(<span class="keyword">char</span> *str1, <span class="keyword">char</span> *str2) {</div><div class="line">    <span class="keyword">while</span> (*str && *++str);</div><div class="line">    <span class="keyword">while</span> (*str1++ = *str2++);</div><div class="line">}</div></pre></td></tr></table></figure>


    
  </div>
  <footer class="entry-footer">
    <div class="entry-meta-footer">
      <span class="category">
        

      </span>
      <span class="tags">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/note/">笔记</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/programming/">编程</a></li></ul>


      </span>
    </div>
  </footer>
  
</article>


  <hr class="article-divider">




  
  



    </div>
    <div class="mb-search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:blog.zhanghai.me">
    </form>
</div>
<footer id="footer">
  <h1 class="footer-blog-title">
    <a href="/">梦断代码</a>
  </h1>
  <span class="copyright">
    &copy; 2015 张海<br>
    Modify from <a href="http://sanographix.github.io/tumblr/apollo/" target="_blank">Apollo</a> theme, designed by <a href="http://www.sanographix.net/" target="_blank">SANOGRAPHIX.NET</a><br>
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
  </span>
</footer>

    
<script>
  var disqus_shortname = 'zhanghai';
  
  (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//cdn.staticfile.org/jquery/2.0.3/jquery.min.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js" type="text/javascript"></script>


  </div>
</body>
</html>
